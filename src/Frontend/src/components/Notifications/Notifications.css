/* ==== OVERRIDES NÃO-DESTRUTIVOS (colar no final do arquivo) ==== */

/* 1) Ícone do sino “flat” (sem bolinha/branco) */
.perfil .notif-bell .notif-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;

  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  width: auto !important;
  height: auto !important;

  color: var(--text);
  cursor: pointer;
}

.perfil .notif-bell .notif-btn i {
  font-size: 20px;
  line-height: 1;
}

.perfil .notif-bell .notif-btn:hover {
  color: var(--primary);
}

.perfil .notif-bell .notif-btn:active i {
  transform: scale(0.9);
  transition: transform 120ms ease-out;
}


/* 2) Badge sem “aro” branco (só o contador) */
.perfil .notif-bell .notif-badge {
  position: absolute;
  top: -6px;
  right: -6px;
  background: var(--primary);
  color: #fff;
  border-radius: 999px;
  font-size: 11px;
  line-height: 1;
  min-width: 18px;
  height: 18px;
  display: grid;
  place-items: center;
  padding: 0 4px;
  border: none !important;         
}

/* 3) Garantir que sino e avatar fiquem lado a lado no header */
.painel-container .perfil {
  display: inline-flex;            /* ou flex, se já existir */
  align-items: center;
  gap: 8px;                        /* espaço entre sino e avatar */
}

/* (Opcional) se quiser inverter a ordem sem mexer no JSX */
.painel-container .perfil .notif-bell { order: 1; }
.painel-container .perfil .avatar-button { order: 2; }


/* 4) Robustez do popover no header (sem quebrar layout existente) */
.perfil .notif-bell { display: inline-flex; align-items: center; position: relative;  }
.perfil .notif-bell .notif-popover {
  z-index: 10000;                  /* sobrepõe header */
  background: var(--card-bg);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: var(--shadow);
}
.perfil .notif-bell .notif-head { border-bottom: 1px solid var(--border); }
.perfil .notif-bell .notif-list { max-height: 360px; overflow: auto; }
.perfil .notif-bell .notif-item.unread {
  background: color-mix(in srgb, var(--primary) 8%, transparent);
}
/* Fallback caso o browser não suporte color-mix */
@supports not (color: color-mix(in srgb, #00ec9e, #00f535)) {
  .perfil .notif-bell .notif-item.unread { background: rgba(76, 175, 80, 0.06); }
}
.notif-popover {
  position: absolute; top: calc(100% + 8px);
  min-width: 320px; max-width: min(420px, 92vw);
  background: var(--card-bg); color: var(--text);
  border: 1px solid var(--border); border-radius: 12px;
  box-shadow: var(--shadow); z-index: 9999;
}
.notif-popover.right { right: 0; }
.notif-popover.left { left: 0; }

.notif-head {
  display: flex; align-items: center; gap: 8px;
  padding: 10px 12px; border-bottom: 1px solid var(--border);
}
.notif-head .gap { flex: 1; }
.link {
  padding: 0; background: transparent; border: none; color: var(--primary);
  cursor: pointer; font-weight: 600;
}
.link.danger { color: #d90429; }
.link:disabled { opacity: .5; cursor: not-allowed; }

.notif-empty {
  display: grid; place-items: center; gap: 8px;
  padding: 20px; text-align: center;
}
.notif-empty i { font-size: 28px; color: var(--muted); }

.notif-list {
  margin: 0; padding: 6px; max-height: 360px; overflow: auto; list-style: none;
}
.notif-item {
  display: grid; grid-template-columns: 28px 1fr; gap: 10px;
  padding: 10px; border-radius: 10px;
}

.painel-container[data-theme="escuro"] .notif-bell.ring .notif-badge {
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary) 24%, transparent);
}

/* ==== ANIMAÇÃO DO SINO E DO BADGE ==== */

/* Balanço do sino (decai aos poucos) */
@keyframes bell-ring {
  0%   { transform: rotate(0deg); }
  15%  { transform: rotate(-18deg); }
  30%  { transform: rotate(14deg); }
  45%  { transform: rotate(-10deg); }
  60%  { transform: rotate(6deg); }
  75%  { transform: rotate(-3deg); }
  100% { transform: rotate(0deg); }
}

/* Pop do badge ao chegar nova notificação */
@keyframes badge-pop {
  0%   { transform: scale(0.6); opacity: .6; }
  40%  { transform: scale(1.2); opacity: 1; }
  60%  { transform: scale(0.95); }
  100% { transform: scale(1); }
}

/* Quando a classe .ring estiver ativa no wrapper do sino */
.perfil .notif-bell.ring .notif-btn i {
  animation: bell-ring 1.1s ease-in-out both;
  transform-origin: 50% 8%; /* pivô perto da "haste" do sino */
}

/* Badge dá um pop sutil */
.perfil .notif-bell.ring .notif-badge {
  animation: badge-pop 600ms ease-out both;
}

/* Acessibilidade: reduzir animação se o usuário preferir */
@media (prefers-reduced-motion: reduce) {
  .perfil .notif-bell.ring .notif-btn i,
  .perfil .notif-bell.ring .notif-badge {
    animation: none;
  }
}

@keyframes pop-in {
  0% { transform: translateY(-6px) scale(.98); opacity: 0; }
  100% { transform: translateY(0) scale(1); opacity: 1; }
}
.notif-popover { animation: pop-in 140ms ease-out; }

@keyframes bell-tap {
  0%   { transform: scale(1) rotate(0deg); }
  40%  { transform: scale(0.88); }
  70%  { transform: scale(1.08); }
  100% { transform: scale(1); }
}

/* Ripple: onda sutil que se expande a partir do ícone */
@keyframes tap-ripple {
  0%   { transform: scale(0); opacity: .35; }
  80%  { transform: scale(1.4); opacity: .12; }
  100% { transform: scale(1.6); opacity: 0; }
}

/* Quando a classe .tap estiver ativa no wrapper do sino */
.perfil .notif-bell.tap .notif-btn i {
  animation: bell-tap 220ms cubic-bezier(.2,.8,.2,1) both;
  transform-origin: 50% 50%;
}

/* Elemento visual do ripple (pseudo) */
.perfil .notif-bell.tap .notif-btn::after {
  content: "";
  position: absolute;
  inset: -6px;                 /* margem extra para a onda */
  border-radius: 999px;
  background: currentColor;    /* usa a cor do ícone */
  opacity: 0;
  animation: tap-ripple 400ms ease-out both;
  pointer-events: none;
}

/* Respeitar quem prefere menos movimento */
@media (prefers-reduced-motion: reduce) {
  .perfil .notif-bell.tap .notif-btn i,
  .perfil .notif-bell.tap .notif-btn::after {
    animation: none;
  }
}
